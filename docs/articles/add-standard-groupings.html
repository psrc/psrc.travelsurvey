<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Add Standard Groupings • psrc.travelsurvey</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Standard Groupings">
<meta name="description" content="Add variables with standard PSRC category groupings
">
<meta property="og:description" content="Add variables with standard PSRC category groupings
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">psrc.travelsurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/retrieve-and-summarize-data.html">Retrieve and summarize data</a></li>
    <li><a class="dropdown-item" href="../articles/add-standard-groupings.html">Add standard groupings</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add Standard Groupings</h1>
            
      

      <div class="d-none name"><code>add-standard-groupings.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="agency-standard-category-schemes">Agency standard category schemes<a class="anchor" aria-label="anchor" href="#agency-standard-category-schemes"></a>
</h2>
<p>In light of sample sizes, breakdowns from PSRC’s Household Travel
Survey instrument often involve category groupings with less than the
most granular reported level of detail.
<strong>psrc.travelsurvey</strong> functions provide the most commonly
utilized groupings, which can be considered agency standard for the
variables of interest. Although each new variable is specific to one
unit of analysis (i.e. hh, person, day, trip, vehicle), the first and
only argument to each grouping function is the entire
<code>hts_data</code> object, in order to facilitate piping. When more
than one standard grouping exists for a variable, the function returns
them all, for convenience; they can be distinguished by a suffix
denoting the number of categories.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrc.travelsurvey/">psrc.travelsurvey</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify which variables to retrieve</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"hhsize"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve the data</span></span>
<span><span class="va">hts_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_psrc_hts.html">get_psrc_hts</a></span><span class="op">(</span>survey_year<span class="op">=</span><span class="fl">2023</span>, survey_vars <span class="op">=</span> <span class="va">vars</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Add standard groupings for age and household size</span></span>
<span><span class="co"># -- Notice age and hhsize use different tables (person, hh)</span></span>
<span><span class="co"># -- but you don't need to worry about that; the package knows</span></span>
<span><span class="va">hts_data</span> <span class="op">&lt;-</span> <span class="va">hts_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/hts_bin_age.html">hts_bin_age</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/hts_bin_hhsize.html">hts_bin_hhsize</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hts_data</span><span class="op">$</span><span class="va">person</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">.SD</span><span class="op">)</span>, .SDcols<span class="op">=</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/patterns.html" class="external-link">patterns</a></span><span class="op">(</span><span class="st">"^age"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;            age       age_bin5       age_bin3</span></span>
<span><span class="co">#&gt;          &lt;ord&gt;         &lt;fctr&gt;         &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1: 45-54 years    45-64 Years    18-64 Years</span></span>
<span><span class="co">#&gt; 2: 16-17 years Under 18 Years Under 18 Years</span></span>
<span><span class="co">#&gt; 3: 12-15 years Under 18 Years Under 18 Years</span></span>
<span><span class="co">#&gt; 4: 35-44 years    25-44 Years    18-64 Years</span></span>
<span><span class="co">#&gt; 5: 25-34 years    25-44 Years    18-64 Years</span></span>
<span><span class="co">#&gt; 6: 25-34 years    25-44 Years    18-64 Years</span></span></code></pre></div>
<p>These functions each require a disaggregate input variable to be
requested in the earlier <code><a href="../reference/get_psrc_hts.html">get_psrc_hts()</a></code> call. Both the
input variable and the output variable are included in the resulting
<code>hts_data</code> object.</p>
<p>Currently, the following functions exist, along with the required
input variable.</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="13%">
<col width="28%">
<col width="32%">
</colgroup>
<thead><tr class="header">
<th align="left">Function</th>
<th align="center">Input variable</th>
<th align="center">Output variable(s)</th>
<th align="center">Breakpoints</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_income.html">hts_bin_income()</a></code></strong></td>
<td align="center">hhincome_broad</td>
<td align="center">hhincome_bin3 / <br>hhincome_bin5</td>
<td align="center">$50K ]( $100K <strong>or</strong><br> $25K ]( $50K ](
$75K ]( $100K</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_hhsize.html">hts_bin_hhsize()</a></code></strong></td>
<td align="center">hhsize</td>
<td align="center">hhsize_bin4</td>
<td align="center">1 • 2 • 3 • 4+</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_vehicle_count.html">hts_bin_vehicle_count()</a></code></strong></td>
<td align="center">vehicle_count</td>
<td align="center">vehicle_count_bin4</td>
<td align="center">1 • 2 • 3 • 4+</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_rent_own.html">hts_bin_rent_own()</a></code></strong></td>
<td align="center">rent_own</td>
<td align="center">rent_own_bin2</td>
<td align="center">rent • own</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_age.html">hts_bin_age()</a></code></strong></td>
<td align="center">age</td>
<td align="center">adult / age_bin3 / <br>age_bin5</td>
<td align="center">18[ <strong>or</strong> 18 )[ 64 )[ 65
<strong>or</strong><br> 18 )[ 25 )[ 45 )[ 65</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_worker.html">hts_bin_worker()</a></code></strong></td>
<td align="center">employment</td>
<td align="center">worker</td>
<td align="center">worker • non-worker</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_edu.html">hts_bin_edu()</a></code></strong></td>
<td align="center">education</td>
<td align="center">edu_bin2</td>
<td align="center">Less )[ Bachelors+</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_gender.html">hts_bin_gender()</a></code></strong></td>
<td align="center">gender</td>
<td align="center">gender_bin3</td>
<td align="center">m • f • nb/oth</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_sexuality.html">hts_bin_sexuality()</a></code></strong></td>
<td align="center">sexuality</td>
<td align="center">sexuality_bin3</td>
<td align="center">hetero • LGBTQ+ • Missing</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_commute_freq.html">hts_bin_commute_freq()</a></code></strong></td>
<td align="center">commute_freq</td>
<td align="center">commute_freq_bin6</td>
<td align="center">Less • 1 • 2 • 3 • 4 • 5+ days/week</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_commute_mode.html">hts_bin_commute_mode()</a></code></strong></td>
<td align="center">commute_mode</td>
<td align="center">commute_mode_bin5</td>
<td align="center">SOV • HOV • trnst • w/b • oth</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_lum_sector.html">hts_bin_lum_sector()</a></code></strong></td>
<td align="center">industry</td>
<td align="center">lum_sector</td>
<td align="center">(13 sectors)</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_industry_sector.html">hts_bin_industry_sector()</a></code></strong></td>
<td align="center">industry</td>
<td align="center">industry_sector</td>
<td align="center">(8 sectors)</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_telecommute_freq.html">hts_bin_telecommute_freq()</a></code></strong></td>
<td align="center">telecommute_freq</td>
<td align="center">telecommute_freq_bin4</td>
<td align="center">Less )[ 1 )[ 3 )[ 5+</td>
</tr>
<tr class="odd">
<td align="left"><strong><code><a href="../reference/hts_bin_telework_time.html">hts_bin_telework_time()</a></code></strong></td>
<td align="center">telework_time</td>
<td align="center">telework_time_bin3</td>
<td align="center">Less )[ 3 )[ 6 hrs</td>
</tr>
<tr class="even">
<td align="left"><strong><code><a href="../reference/hts_bin_dest_purpose.html">hts_bin_dest_purpose()</a></code></strong></td>
<td align="center">dest_purpose</td>
<td align="center">dest_purpose_bin4 / <br>dest_purpose_bin9</td>
<td align="center">Home • Work • Social/Rec/Eat • Errand</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Suzanne Childress, Michael Jensen, Joanne Lin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
