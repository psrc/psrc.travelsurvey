[{"path":"https://psrc.github.io/psrc.travelsurvey/articles/calculate_hhts_summaries.html","id":"retrieve-household-travel-survey-data-get_hhts","dir":"Articles","previous_headings":"","what":"Retrieve Household Travel Survey data: get_hhts()","title":"Calculate Household Travel Survey summaries","text":"psrc.travelsurvey package designed facilitate analysis using survey data stored geographic scales. Data analysis psrccensus package involves two steps: first step consists retrieving data interest via get_hhts() function. arguments : survey - addition surveys identified year (e.g., survey=“2021”), PSRC also combined (.e. multi-year) datasets (e.g. survey=“2017_2019”) level - unit analysis: “p” persons, “h” households, “t” trips, “v” vehicles vars - either single variable character vector variables (including geographic units), lowercase names precisely matching data dictionary result get_hhts() dataframe includes survey identifier, set potential sampling weights match requested variables, well variables . manipulation object must take weights account. Also note categorical variables encoded factor datatype must recast (using .character() ) reclassifying custom categories. get_hhts() can called combination survey - level intend use. example, want calculate household statistics population statistics survey, still need use get_hhts() households (level=“h”) second time persons (‘level’=“p”). invoke get_hhts() suggest assign name helps differentiate whatever survey - level combinations relevant analysis. Although Household Travel Survey variables specific particular unit, household attributes can associated people, days, trips vehicles; person attributes can associated days trips, can also associated one another. assist locating exact name variables want, hhts_varsearch() function takes single search term returns table variable name, description, survey years variable present.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/calculate_hhts_summaries.html","id":"generate-summary-statistics","dir":"Articles","previous_headings":"","what":"Generate summary statistics","title":"Calculate Household Travel Survey summaries","text":"second step analysis involves calculating summary statistics result prior step. Since Household Travel Survey stratified sample, summary statistics must use particular sampling weight order accurately expanded full population. four relevant statistical functions, along summary function gives four table.          hhts_count() - provides counts percentages          hhts_sum()          hhts_median()          hhts_mean()          hhts_summary() - provides statistics one table arguments summary function identical: df - dataframe returned get_hhts() stat_var - sum, median mean, numeric variable summarized group_vars - grouping variable/s (multiple, character vector) geographic_unit - subregional (e.g. county, tract); grouping variable ordered first given subtotals Argument names can omitted (saving keystrokes) arguments provided proper sequence; may prefer explicit avoid confusing . Note stat_var must numeric group_vars must continuous (.e., must categorical interval). stat_var argument ignored count function (numeric variable implicit), allowed since scripting use identical arguments (e.g. map functions). psrc.travelsurvey handles selection application sampling weights internally, deliver estimates full population. also provides tabulated margin error (MOE) estimate separately labeled ’_moe’ column.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/calculate_hhts_summaries.html","id":"examples","dir":"Articles","previous_headings":"Generate summary statistics","what":"Examples","title":"Calculate Household Travel Survey summaries","text":"example, calculate median trip distance, use following function calls: calculate subgroup category (, travel mode), use optional grouping variable argument. count function tabulates number units analysis, depending level specified get_hhts. result represents region (via weighting), survey sample. intend count things households, people, travel days, trips vehicles, use ‘total’ function instead, sums target variable. hhts_count() function also provides percentages. Notice stat_var implicit counts, group_vars argument must specified. report subregional geography, must include variable vars argument get_hhts() . makes sense request many attributes per survey-level combination need, can run statistical functions independently dataframe–including multiple geographic scales. statistical call also provide regional total last line, context/comparison.","code":"t_2017_19a      <- get_hhts(survey=\"2017_2019\",                             level=\"t\",                             vars=\"trip_path_distance\")  rs_median_dist  <- hhts_median(df=t_2017_19a,                                 stat_var=\"trip_path_distance\") t_2017_19b             <- get_hhts(\"2017_2019\", \"t\", c(\"mode_1\", \"trip_path_distance\")) rs_median_dist_x_mode  <- hhts_median(t_2017_19b, \"trip_path_distance\", \"mode_1\") h_2017_19a      <- get_hhts(\"2017_2019\", \"h\", \"hh_race_category\") rs_race_region  <- hhts_count(h_2017_19a, group_vars=\"hh_race_category\") h_2017_19b       <- get_hhts(\"2017_2019\", \"h\", c(\"hh_race_category\", \"final_cnty\", \"home_city_name\")) rs_race_county    <- hhts_count(h_2017_19b, group_vars=\"hh_race_category\", geographic_unit=\"final_cnty\") rs_race_city     <- hhts_count(h_2017_19b, group_vars=\"hh_race_category\", geographic_unit=\"home_city_name\")"},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/calculate_hhts_summaries.html","id":"sample-sizes-confidence-and-error-margins","dir":"Articles","previous_headings":"","what":"Sample sizes, confidence, and error margins","title":"Calculate Household Travel Survey summaries","text":"Although psrc.travelsurvey allows specify multiple grouping variables, ’ll need keep mind limits can usefully determined small subsets respondents. draw responsible conclusions, ’ll need examine margins error (MOE) psrc.travelsurvey calculates along estimate. respondents category combination, margin error may beyond calculation (NaN, ‘number’), large estimate little practical value. cases, may want potentially analyze dimensions data separately rather combination.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/calculate_hhts_summaries.html","id":"determining-difference","dir":"Articles","previous_headings":"Sample sizes, confidence, and error margins","what":"Determining difference","title":"Calculate Household Travel Survey summaries","text":"actual difference two statistics generated Household Travel Survey data? know, ’ll need examine margins error. rule thumb, overlap 90 percent confidence intervals two estimates, conclude values different. perform careful test, can calculate Z score: \\[\\frac{|Est_{1} - Est_{2}|}{\\sqrt{MOE_{est1}^2 + MOE_{est2}^2}}\\] meaningful difference two estimates Z score greater 1. test can applied different years, PUMS ACS. However, please remember Census warns drawing comparisons estimates generated different spans (e.g. 1yr 5yr), especially overlap (observations may exist ). z_score() convenience function performs calculation: NOTE POWER USERS: Additional methods including bulk processing custom weighting covered psrc.travelsurvey tips & tricks vignette.","code":"t_2017_19c  <- get_hhts(\"2017_2019\", \"t\", c(\"mode_simple\",\"trip_path_distance\",\"travel_time\")) rs          <- hhts_median(t_2017_19c, \"travel_time\", \"mode_simple\") z_score(rs[1], rs[3])   # Compares the first-line and third-line estimates for significant difference;                          # -- true difference indicated by score > 1"},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/psrc.travelsurvey_tips_and_tricks.html","id":"variable-transformation-and-customization","dir":"Articles","previous_headings":"","what":"Variable transformation and customization","title":"psrc.travelsurvey tips & tricks","text":"Analysts may need alter (.e. recode) variables survey data object, example simplifying categories changing continuous variable binned categorical variable. psrc.travelsurvey selects appropriate weights basis variable names statistical call, weight selection logic account newly named custom variables. inappropriate weight selected, resulting statistics incorrect. Therefore, custom groups variables needed, suggest one following: one-simplification single column, copy data object, recode variable keeping existing variable name. complex cases convenience always accessing variable future, contact member Data Science group ’ll add new column appropriate level Elmer view (e.g. household, person, day, trip). first method may appropriate exploratory analysis; second method better variables utilized repeatedly applications. Staff respond promptly suggestions, don’t hesistate ask. third possibility exists, specify weight using swgt= option (described bottom page). requires familiarity set available weights, well vigilance coding–.e. swgt= omitted stat function calls, package apply default weight well wrong. basis, generally recommended.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/psrc.travelsurvey_tips_and_tricks.html","id":"bulk-statistic-function","dir":"Articles","previous_headings":"","what":"Bulk statistic function","title":"psrc.travelsurvey tips & tricks","text":"hhts_bulk_stat() function designed circumstances ask repeated analysis year & level, using various grouping variables. place group_var parameter (string character vector), accepts group_var_list, .e. list element grouping variable want analyzed separately. still one numeric target_var one stat_type (count, sum, median, mean), function can used lapply() complicated batch jobs. key feature function stores name grouping variable column combined statistics table. feature can expanded cases multiple grouping variables, , element list must length first variable can differ across entries. (Note although standard statistical functions can number grouping variable combinations, sample sizes generally support two grouping variables.)","code":"gvars <- c(\"res_factors_30min\",            \"res_factors_afford\",            \"res_factors_closefam\",            \"res_factors_hwy\",            \"res_factors_school\",            \"res_factors_space\",            \"res_factors_transit\",            \"res_factors_walk\",            \"res_factors_cultural\") h_2017_19c   <- get_hhts(\"2017_2019\", \"h\", gvars) rs_res_ftrs  <- hhts_bulk_stat(h_2017_19c, \"count\", group_var_list=\"gvars\")"},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/psrc.travelsurvey_tips_and_tricks.html","id":"option-to-exclude-na","dir":"Articles","previous_headings":"","what":"Option to exclude NA","title":"psrc.travelsurvey tips & tricks","text":"Responses can legitimately missing (NA), standard certain questions (e.g. skip logic, children, data collected). NA values removed stat_var calculating sum, median mean, default left legitimate response category grouping variables. exclude NA grouped result sets, use option incl_na=FALSE psrc.travelsurvey stat function. However, aware resulting totals shares longer match regional totals, representing instead subset corresponds filled responses.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/articles/psrc.travelsurvey_tips_and_tricks.html","id":"option-to-specify-a-non-default-survey-expansion-weight","dir":"Articles","previous_headings":"","what":"Option to specify a non-default survey expansion weight","title":"psrc.travelsurvey tips & tricks","text":"familiar expansion weights want determine weight rather follow standard weight hierarchy, need specify weight name vars argument get_hhts(), use spec_wgt= option summary statistical call weight wanted. can use dataframe switch weights like, standard weight retrieved default still used statistical call without spec_wgt= option specified.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Craig Helmann. Author. Christy Lam. Author. Suzanne Childress. Author. Michael Jensen. Maintainer.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Helmann C, Lam C, Childress S (2023). psrc.travelsurvey: Utilize PSRC Household Travel Survey data. R package version 0.1.0, https://psrc.github.io/psrc.travelsurvey/.","code":"@Manual{,   title = {psrc.travelsurvey: Utilize PSRC Household Travel Survey data},   author = {Craig Helmann and Christy Lam and Suzanne Childress},   year = {2023},   note = {R package version 0.1.0},   url = {https://psrc.github.io/psrc.travelsurvey/}, }"},{"path":"https://psrc.github.io/psrc.travelsurvey/index.html","id":"psrctravelsurvey","dir":"","previous_headings":"","what":"Utilize PSRC Household Travel Survey data","title":"Utilize PSRC Household Travel Survey data","text":"Various functions pull, process visualize PSRC’s Household Travel Survey data geographies Central Puget Sound Region. install package, need Rtools devtools package, installed already: install.packages(c(\"devtools\",\"installr\")) installr::install.Rtools() devtools::install_github(\"psrc/psrc.travelsurvey\")","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_hhts.html","id":null,"dir":"Reference","previous_headings":"","what":"HHTS data retrieval — get_hhts","title":"HHTS data retrieval — get_hhts","text":"Gets requested Household Travel Survey variables","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_hhts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HHTS data retrieval — get_hhts","text":"","code":"get_hhts(survey, level, vars, ...)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_hhts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HHTS data retrieval — get_hhts","text":"survey character string denoting single combined survey year--latter, years separated underscore, e.g.\"2017_2019\" level either \"h\" (\"households\"), \"p\" (\"persons\"), \"d\" (\"days\"), \"t\" (\"trips\"), \"v\" (\"vehicles\") vars character vector requested variables ... pass-hhts parameters--either Elmer SQLite","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_hhts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"HHTS data retrieval — get_hhts","text":"dataframe variables necessary weights","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_var_defs.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve HHTS variable definitions — get_var_defs","title":"Retrieve HHTS variable definitions — get_var_defs","text":"Gets requested variable attributes--e.g. data type, associated weight name & priority","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_var_defs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve HHTS variable definitions — get_var_defs","text":"","code":"get_var_defs(vars, ...)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_var_defs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve HHTS variable definitions — get_var_defs","text":"vars character vector requested variables ... pass-hhts parameters--either Elmer SQLite","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/get_var_defs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve HHTS variable definitions — get_var_defs","text":"data.table filtered variable attributes","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts2srvyr.html","id":null,"dir":"Reference","previous_headings":"","what":"HHTS to srvyr — hhts2srvyr","title":"HHTS to srvyr — hhts2srvyr","text":"Creates srvyr object HHTS","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts2srvyr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HHTS to srvyr — hhts2srvyr","text":"","code":"hhts2srvyr(df, survey, vars, spec_wgt = NULL)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts2srvyr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HHTS to srvyr — hhts2srvyr","text":"df dataframe returned get_hhts survey survey year combination survey years comprising survey, e.g. c(2017_2019) vars character vector requested variables spec_wgt optional user-specified expansion weight; possible variable name included get_hhts call.","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts2srvyr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"HHTS to srvyr — hhts2srvyr","text":"srvyr object sampling weights","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_bulk_stat.html","id":null,"dir":"Reference","previous_headings":"","what":"Household Survey summary statistics — hhts_bulk_stat","title":"Household Survey summary statistics — hhts_bulk_stat","text":"Generate statistic separately list grouping variables List input items can multiple, .e. character vector","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_bulk_stat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Household Survey summary statistics — hhts_bulk_stat","text":"","code":"hhts_bulk_stat(   df,   stat_type,   stat_var = NULL,   group_var_list = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_bulk_stat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Household Survey summary statistics — hhts_bulk_stat","text":"df dataframe returned get_hhts stat_type Desired survey statistic stat_var numeric variable summarize group_var_list Factor variable/s grouping geographic_unit Optional sub-regional geographic grouping variable, \"final_cnty\" spec_wgt optional user-specified expansion weight, .e. place standard expansion weight determined variable hierarchy. possible variable name included get_hhts call. incl_na option remove NA group_vars (FALSE, total reflect full dataset)","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_bulk_stat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Household Survey summary statistics — hhts_bulk_stat","text":"table variable names labels, summary statistic margin error","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_connect.html","id":null,"dir":"Reference","previous_headings":"","what":"Connection to survey datasource — hhts_connect","title":"Connection to survey datasource — hhts_connect","text":"Connection survey datasource","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_connect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Connection to survey datasource — hhts_connect","text":"","code":"hhts_connect(connection = NULL)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_connect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Connection to survey datasource — hhts_connect","text":"connection existing connection relevant","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_connect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Connection to survey datasource — hhts_connect","text":"database connection","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_recode_na.html","id":null,"dir":"Reference","previous_headings":"","what":"HHTS recode missing as NA — hhts_recode_na","title":"HHTS recode missing as NA — hhts_recode_na","text":"Recode missing values NA","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_recode_na.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HHTS recode missing as NA — hhts_recode_na","text":"","code":"hhts_recode_na(dt)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_recode_na.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HHTS recode missing as NA — hhts_recode_na","text":"dt data.table","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_recode_na.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"HHTS recode missing as NA — hhts_recode_na","text":"data.table missing values recoded NA","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_stat.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic call for HHTS summary statistics — hhts_stat","title":"Generic call for HHTS summary statistics — hhts_stat","text":"Given specific form related hhts_stat functions. Separate function total, count, median, mean'","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_stat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic call for HHTS summary statistics — hhts_stat","text":"","code":"hhts_stat(   df,   stat_type,   stat_var,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )  hhts_count(   df,   stat_var = NULL,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )  hhts_sum(   df,   stat_var,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )  hhts_median(   df,   stat_var,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )  hhts_mean(   df,   stat_var,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )  hhts_summary(   df,   stat_var,   group_vars = NULL,   geographic_unit = NULL,   spec_wgt = NULL,   incl_na = TRUE )"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_stat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic call for HHTS summary statistics — hhts_stat","text":"df dataframe returned get_hhts stat_type Desired survey statistic stat_var numeric variable summarize group_vars Categorical variable/s grouping geographic_unit Optional sub-regional geographic grouping variable, \"final_cnty\" spec_wgt optional user-specified expansion weight; possible variable name included get_hhts call. incl_na option remove NA group_vars (FALSE, total reflect full dataset)","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_stat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic call for HHTS summary statistics — hhts_stat","text":"summary tibble, including variable names, summary statistic margin error table variable names labels, summary statistic margin error","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_varsearch.html","id":null,"dir":"Reference","previous_headings":"","what":"Search HHTS variable definitions — hhts_varsearch","title":"Search HHTS variable definitions — hhts_varsearch","text":"Look variable name using search term","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_varsearch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search HHTS variable definitions — hhts_varsearch","text":"","code":"hhts_varsearch(regex, ...)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_varsearch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search HHTS variable definitions — hhts_varsearch","text":"regex search term ... pass-hhts parameters--either Elmer SQLite","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/hhts_varsearch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search HHTS variable definitions — hhts_varsearch","text":"data.table filtered variable attributes","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/z_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Z Score — z_score","title":"Z Score — z_score","text":"Stat determine two estimates different","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/z_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Z Score — z_score","text":"","code":"z_score(x, y)"},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/z_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Z Score — z_score","text":"x row aggregate table compare--includes count/sum/mean/median MOE y row aggregate table compare--also includes count/sum/mean/median MOE","code":""},{"path":"https://psrc.github.io/psrc.travelsurvey/reference/z_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Z Score — z_score","text":"Z score; larger 1, difference significant","code":""}]
